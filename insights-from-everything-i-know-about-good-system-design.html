<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Ashwini Chaudhary(Monty)">
        <meta name="description" content="">
        <title>Insights from "Everything I Know About Good System Design" | Ashwini's blog</title>

        <!-- Favicon -->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        
        <!-- RSS Feed -->
        <link rel="alternate" type="application/atom+xml" title="Ashwini's blog blog atom feed" href="/feeds/all.atom.xml" />
        
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400;1,600&family=Source+Sans+3:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,600&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
        
        <!-- Bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        
        <!-- Font Awesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        
        <!-- Icons CSS -->
        <link rel="stylesheet" type="text/css" href="/theme/css/icons.css"/>
        
        <!-- Code highlighting -->
        <style>.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #60a0b0; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #007020; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #007020 } /* Comment.Preproc */
.highlight .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.highlight .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #007020 } /* Keyword.Pseudo */
.highlight .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #902000 } /* Keyword.Type */
.highlight .m { color: #40a070 } /* Literal.Number */
.highlight .s { color: #4070a0 } /* Literal.String */
.highlight .na { color: #4070a0 } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.highlight .no { color: #60add5 } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #007020 } /* Name.Exception */
.highlight .nf { color: #06287e } /* Name.Function */
.highlight .nl { color: #002070; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #062873; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #bb60d5 } /* Name.Variable */
.highlight .ow { color: #007020; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #40a070 } /* Literal.Number.Float */
.highlight .mh { color: #40a070 } /* Literal.Number.Hex */
.highlight .mi { color: #40a070 } /* Literal.Number.Integer */
.highlight .mo { color: #40a070 } /* Literal.Number.Oct */
.highlight .sb { color: #4070a0 } /* Literal.String.Backtick */
.highlight .sc { color: #4070a0 } /* Literal.String.Char */
.highlight .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #4070a0 } /* Literal.String.Double */
.highlight .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #4070a0 } /* Literal.String.Heredoc */
.highlight .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.highlight .sx { color: #c65d09 } /* Literal.String.Other */
.highlight .sr { color: #235388 } /* Literal.String.Regex */
.highlight .s1 { color: #4070a0 } /* Literal.String.Single */
.highlight .ss { color: #517918 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #bb60d5 } /* Name.Variable.Class */
.highlight .vg { color: #bb60d5 } /* Name.Variable.Global */
.highlight .vi { color: #bb60d5 } /* Name.Variable.Instance */
.highlight .il { color: #40a070 } /* Literal.Number.Integer.Long */</style>
        
        <!-- Main CSS -->
        <style>/* Base styles */
:root {
  /* Light theme (default) */
  --primary-color: #3b82f6;
  --primary-dark: #2563eb;
  --secondary-color: #6366f1;
  --text-color: #1f2937;
  --text-light: #4b5563;
  --background-color: #ffffff;
  --background-alt: #f9fafb;
  --border-color: #e5e7eb;
  --code-bg: #f3f4f6;
  --link-hover: #1d4ed8;
  --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --navbar-bg: #ffffff;
  --navbar-color: #4b5563;
  --footer-bg: #f8f9fa;
  --footer-color: #6c757d;
  --card-bg: #ffffff;
  --blockquote-bg: #f9fafb;
}

/* Dark theme */
[data-theme="dark"] {
  --primary-color: #60a5fa;
  --primary-dark: #3b82f6;
  --secondary-color: #818cf8;
  --text-color: #f3f4f6;
  --text-light: #d1d5db;
  --background-color: #111827;
  --background-alt: #1f2937;
  --border-color: #374151;
  --code-bg: #282c34;
  --link-hover: #93c5fd;
  --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
  --navbar-bg: #111827;
  --navbar-color: #d1d5db;
  --footer-bg: #1f2937;
  --footer-color: #9ca3af;
  --card-bg: #1f2937;
  --blockquote-bg: #111827;
}

/* Typography Variables */
:root {
  --font-heading: 'Poppins', 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-body: 'Source Sans 3', 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Inconsolata', monospace;
}

body {
  font-family: var(--font-body);
  font-weight: 400;
  line-height: 1.7;
  color: var(--text-color);
  background-color: var(--background-color);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  transition: color 0.3s ease, background-color 0.3s ease;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  font-weight: 700;
  line-height: 1.3;
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
}

a {
  color: var(--primary-color);
  text-decoration: none;
  transition: color 0.2s;
}

a:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

/* Layout */
.site-content {
  flex: 1 0 auto;
}

.container {
  max-width: 1200px;
  padding: 0 1.5rem;
}

/* Header */
.site-header {
  border-bottom: 1px solid var(--border-color);
  background-color: var(--navbar-bg);
  transition: background-color 0.3s ease;
}

.navbar-brand {
  font-weight: 700;
  font-size: 1.5rem;
  color: var(--text-color);
  transition: color 0.3s ease;
}

.navbar-light .navbar-nav .nav-link {
  color: var(--navbar-color);
  font-weight: 500;
  padding: 0.5rem 1rem;
  transition: color 0.3s ease;
}

.navbar-light .navbar-nav .nav-link:hover {
  color: var(--primary-color);
}

/* Theme toggle button styling */
#theme-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  border-radius: 50%;
  border: 1px solid var(--border-color);
  background-color: var(--background-alt);
  color: var(--text-color);
  cursor: pointer;
  transition: all 0.3s ease;
}

#theme-toggle:hover {
  transform: rotate(15deg);
  background-color: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

/* Article Cards */
.article-card {
  background: var(--card-bg);
  border-radius: 0.5rem;
  overflow: hidden;
  margin-bottom: 2.5rem;
  box-shadow: var(--card-shadow);
  transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s ease;
}

.article-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.article-card .card-body {
  padding: 1.5rem;
}

.article-card .card-title {
  font-family: var(--font-heading);
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
  letter-spacing: -0.01em;
}

.article-card .card-title a {
  color: var(--text-color);
  transition: color 0.2s;
}

.article-card .card-title a:hover {
  color: var(--primary-color);
  text-decoration: none;
}

.article-card .card-text {
  color: var(--text-light);
  margin-bottom: 1rem;
}

.article-card .card-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.875rem;
  color: var(--text-light);
}

.article-card .card-date {
  color: var(--text-light);
}

/* Tags container styling */
.tags-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

/* Tag styling */
.tag {
  display: inline-block;
  padding: 0.2rem 0.6rem;
  font-size: 0.75rem;
  font-weight: 500;
  background: var(--background-alt);
  color: var(--text-light);
  border-radius: 9999px;
  transition: all 0.2s;
}

.tag:hover {
  background: var(--primary-color);
  color: white;
  text-decoration: none;
}

/* Tag with active state */
.tag.active {
  background: var(--primary-color);
  color: white;
}

/* Back to Posts button styling */
.back-to-posts {
  display: inline-block;
  margin-top: 1rem;
  margin-bottom: 1.5rem;
  padding: 0.5rem 1rem;
  color: var(--primary-color);
  background-color: transparent;
  border: 1px solid var(--primary-color);
  border-radius: 0.25rem;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  transition: all 0.2s ease;
}

.back-to-posts:hover {
  background-color: var(--primary-color);
  color: white;
  text-decoration: none;
}

/* Icon for back button */
.back-to-posts i {
  margin-right: 0.25rem;
}

/* Clear separation between tags and back button */
.tags-section {
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border-color);
}

/* Container for back button */
.back-button-container {
  margin-bottom: 2rem;
}

/* Article page */
.article-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border-color);
}

.article-header h1 {
  font-size: 2.5rem;
  margin-bottom: 0.5rem;
  color: var(--text-color);
}

.article-header time {
  color: var(--text-light);
  font-size: 0.9rem;
}

.article-content {
  font-family: var(--font-body);
  font-size: 1.125rem;
  line-height: 1.85;
  font-weight: 400;
  color: var(--text-color);
}

.article-content p {
  margin-top: 0;
  margin-bottom: 1.25rem;
  text-align: justify;
  text-justify: inter-word;
}

.article-content h2 {
  font-family: var(--font-heading);
  font-size: 2rem;
  font-weight: 700;
  margin-top: 3rem;
  margin-bottom: 1.25rem;
  color: var(--text-color);
  letter-spacing: -0.02em;
}

.article-content h3 {
  font-family: var(--font-heading);
  font-size: 1.6rem;
  font-weight: 600;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  color: var(--text-color);
  letter-spacing: -0.01em;
}

.article-content h4 {
  font-family: var(--font-heading);
  font-size: 1.3rem;
  font-weight: 600;
  margin-top: 2rem;
  margin-bottom: 1rem;
  color: var(--text-color);
}

.article-content ul, 
.article-content ol {
  margin-bottom: 1.5rem;
  padding-left: 1.5rem;
}

.article-content li {
  margin-bottom: 0.5rem;
}

.article-content blockquote {
  margin-top: 0.75rem !important;
  margin-bottom: 0.75rem !important;
  padding: 1rem 1.5rem;
  border-left: 4px solid var(--primary-color);
  background-color: var(--blockquote-bg);
  font-style: italic;
  transition: background-color 0.3s ease;
}

/* Override any Bootstrap blockquote styles */
.article-content blockquote p {
  margin-bottom: 0 !important;
}

.article-content blockquote p:last-child {
  margin-bottom: 0 !important;
}

.article-content img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  margin: 1.5rem 0;
}

.article-content pre {
  margin: 1.5rem 0;
  padding: 1rem;
  border-radius: 0.5rem;
  background-color: var(--code-bg);
  overflow-x: auto;
  font-size: 0.9rem;
}

.article-content code {
  font-family: var(--font-mono);
  font-size: 0.875em;
  font-weight: 500;
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
  background-color: var(--code-bg);
}

.article-content pre code {
  padding: 0;
  background-color: transparent;
}

/* Article Meta */
.article-meta {
  margin-top: 3rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--border-color);
}

.read-more-link {
  display: inline-block;
  padding: 0.5rem 1rem;
  background-color: var(--primary-color);
  color: white;
  font-weight: 500;
  border-radius: 0.25rem;
  transition: background-color 0.2s;
}

.read-more-link:hover {
  background-color: var(--primary-dark);
  text-decoration: none;
  color: white;
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: space-between;
  margin: 3rem 0;
}

.pagination-prev,
.pagination-next {
  flex: 0 0 auto;
}

.pagination a {
  display: inline-block;
  padding: 0.5rem 1rem;
  border: 1px solid var(--primary-color);
  border-radius: 0.25rem;
  color: var(--primary-color);
  font-weight: 500;
  transition: all 0.2s;
}

.pagination a:hover {
  background-color: var(--primary-color);
  color: white;
  text-decoration: none;
}

/* Archives & Tags */
.archives-list {
  list-style-type: none;
  padding: 0;
}

.archives-list li {
  padding: 1rem 0;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.archives-list li:last-child {
  border-bottom: none;
}

.archives-list h3 {
  margin: 0;
  font-size: 1.25rem;
}

.archives-list time {
  color: var(--text-light);
  font-size: 0.875rem;
}

/* About page */
.about-header {
  margin-bottom: 2rem;
}

.social-links ul {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  padding: 0;
  margin: 1rem 0;
  list-style: none;
}

.social-links a {
  color: var(--text-light);
  transition: color 0.2s;
}

.social-links a:hover {
  color: var(--primary-color);
}

/* Footer */
.site-footer {
  border-top: 1px solid var(--border-color);
  font-size: 0.9rem;
  background-color: var(--footer-bg);
  color: var(--footer-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

.site-footer a {
  color: var(--text-color);
  transition: color 0.3s ease;
}

.site-footer a:hover {
  color: var(--primary-color);
}

/* Theme Transition Effects */
.article-header, 
.article-content,
.article-meta,
.card-body,
.card-title a,
.card-text,
.card-meta,
.tag,
pre,
code,
.read-more-link,
.pagination a {
  transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
}

/* Style adjustments for the dark theme */
[data-theme="dark"] .navbar-light {
  background-color: var(--navbar-bg) !important;
}

[data-theme="dark"] .navbar-light .navbar-nav .nav-link,
[data-theme="dark"] .navbar-brand {
  color: var(--text-color);
}

[data-theme="dark"] .navbar-light .navbar-toggler-icon {
  filter: invert(1);
}

[data-theme="dark"] .bg-light {
  background-color: var(--background-alt) !important;
}

[data-theme="dark"] .bg-white {
  background-color: var(--background-color) !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .article-header h1 {
    font-size: 2rem;
  }
  
  .article-content h2 {
    font-size: 1.5rem;
  }
  
  .article-content h3 {
    font-size: 1.3rem;
  }
  
  .article-card .card-title {
    font-size: 1.3rem;
  }
  
  .social-links ul {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .pagination {
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }
}</style>


    </head>

    <body>
        <header class="site-header shadow-sm">
            <nav class="navbar navbar-expand-lg navbar-light bg-white">
                <div class="container">
                    <a class="navbar-brand fw-bold" href="/">Ashwini's blog</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                                <li class="nav-item"><a class="nav-link" href="/pages/about.html" title="About">About</a></li>
                                <li class="nav-item"><a class="nav-link" href="/pages/projects.html" title="Projects">Projects</a></li>
                                <li class="nav-item"><a class="nav-link" href="/pages/photography.html" title="Photography">Photography</a></li>
                                <li class="nav-item"><a class="nav-link" href="/archives.html" title="Archive">Archive</a></li>
                                <li class="nav-item"><a class="nav-link icon-rss" href="/feeds/all.atom.xml" title="Ashwini's blog RSS feed" rel="me"></a></li>
                            <li class="nav-item">
                                <button id="theme-toggle" class="btn btn-sm btn-outline-secondary ms-2" aria-label="Toggle theme">
                                    <span id="theme-toggle-light" class="d-none">☀️</span>
                                    <span id="theme-toggle-dark" class="d-none">🌙</span>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <main class="site-content my-4">
<div class="container">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <article class="post">
        <header class="article-header">
          <h1>Insights from "Everything I Know About Good System Design"</h1>
          <time datetime="2025-08-17T00:00:00-04:00" pubdate>Sun 17 August 2025</time>
        </header>

        <div class="article-content">
          <blockquote>
<p>The hard part about software design is state. If you're storing any kind of information for any amount of time, you have a lot of tricky decisions to make about how you save, store and serve it.</p>
</blockquote>
<p>I recently read Sean Goedecke's excellent piece on <a href="https://www.seangoedecke.com/good-system-design/">system design principles</a>, and it crystallized many lessons I've learned over 10+ years of building systems. Here are my key takeaways and how they've played out in practice.</p>
<hr>
<h2 id="table-of-contents"><a class="toclink" href="#table-of-contents">Table of Contents</a></h2>
<ol>
<li><a href="#state-the-root-of-all-complexity">State: The Root of All Complexity</a></li>
<li><a href="#database-design-get-the-schema-right">Database Design: Get the Schema Right</a></li>
<li><a href="#query-efficiency-let-the-database-work">Query Efficiency: Let the Database Work</a></li>
<li><a href="#background-processing-fast-vs-slow-operations">Background Processing: Fast vs. Slow Operations</a></li>
<li><a href="#caching-choose-carefully">Caching: Choose Carefully</a></li>
<li><a href="#hot-paths-zero-margin-for-error">Hot Paths: Zero Margin for Error</a></li>
<li><a href="#logging-and-error-handling">Logging and Error Handling</a></li>
<li><a href="#graceful-failure-the-hardest-problem">Graceful Failure: The Hardest Problem</a></li>
<li><a href="#the-pattern-recognition">The Pattern Recognition</a></li>
</ol>
<hr>
<h2 id="state-the-root-of-all-complexity"><a class="toclink" href="#state-the-root-of-all-complexity">State: The Root of All Complexity</a></h2>
<p>State makes everything tricky. The more state we have, the harder it becomes to reason about our systems and keep track of responsibilities.</p>
<p>On the flip side, statelessness relieves us of worrying about systems getting "stuck" or needing complex guardrails to prevent corruption.</p>
<blockquote>
<p>You should try and minimize the amount of stateful components in any system.</p>
<p>What this means in practice is having one service that knows about the state - i.e. it talks to a database - and other services that do stateless things. Avoid having five different services all write to the same table.</p>
</blockquote>
<p>I'll admit this isn't something I actively think about - I might be doing it unconsciously in some cases and missing it entirely in others. But I want to keep an eye on this pattern in future projects.</p>
<h2 id="database-design-get-the-schema-right"><a class="toclink" href="#database-design-get-the-schema-right">Database Design: Get the Schema Right</a></h2>
<blockquote>
<p>Schema design should be flexible, because once you have thousands or millions of records, it can be an enormous pain to change the schema.
However, if you make it too flexible (e.g. by sticking everything in a "value" JSON column, or using "keys" and "values" tables to track arbitrary data) you load a ton of complexity into the application code (and likely buy some very awkward performance constraints).</p>
</blockquote>
<p>I've always spent significant time on database design when building new systems, and it's consistently paid off. The JSON trap is real - while convenient initially, JSON fields create several problems:</p>
<ul>
<li>Hard to query effectively</li>
<li>Difficult to enforce schemas</li>
<li>Serialization/deserialization overhead</li>
<li>Network transfer costs for large payloads</li>
<li>Additional validation complexity</li>
</ul>
<p>That said, I've found JSON fields useful for storing external API payloads and validation errors - places where the structure truly varies.</p>
<h3 id="index-strategy"><a class="toclink" href="#index-strategy">Index Strategy</a></h3>
<blockquote>
<p>If you expect your table to ever be more than a few rows, you should put indexes on it.</p>
</blockquote>
<p>I think the author didn't intend it, but <strong>index as you go</strong>. If your table isn't showing slow queries yet, don't index prematurely. You can always add indices later and optimize them based on actual query patterns.</p>
<p>I'm a big fan of PostgreSQL's <code>explain analyze</code> - and with AI tools, analyzing query plans has become even more accessible.</p>
<h2 id="query-efficiency-let-the-database-work"><a class="toclink" href="#query-efficiency-let-the-database-work">Query Efficiency: Let the Database Work</a></h2>
<blockquote>
<p>When querying the database, <em>query the database</em>. It's almost always more efficient to get the database to do the work than to do it yourself. For instance, if you need data from multiple tables, <code>JOIN</code> them instead of making separate queries and stitching them together in-memory. Particularly if you're using an ORM, beware accidentally making queries in an inner loop. That's an easy way to turn a <code>select id, name from table</code> to a <code>select id from table</code> and a hundred <code>select name from table where id = ?</code>.</p>
</blockquote>
<p>As a longtime Django user who's been reviewing Django code for 10+ years, I've seen the N+1 query problem countless times. It's crucial to educate your team on ORM fundamentals and maintain documentation of good vs. bad practices.</p>
<p>Having a central document helps during code reviews - it's hard to repeatedly explain the "why" with the same depth. A shared resource makes linking to best practices much easier.</p>
<h2 id="background-processing-fast-vs-slow-operations"><a class="toclink" href="#background-processing-fast-vs-slow-operations">Background Processing: Fast vs. Slow Operations</a></h2>
<p>The goal is a fast request-response cycle for the best user experience. Operations that can't be completed quickly should move to background processing, with users notified when complete.</p>
<p>This seems obvious, but determining what belongs in the background requires careful consideration of user expectations and system constraints.</p>
<h2 id="caching-choose-carefully"><a class="toclink" href="#caching-choose-carefully">Caching: Choose Carefully</a></h2>
<p>Be selective about what and when to cache. Otherwise, you'll face the much harder problem of cache invalidation. The best solution is reducing the number of places using cache.</p>
<p>Cache invalidation remains one of the hardest problems in computer science for good reason.</p>
<h2 id="hot-paths-zero-margin-for-error"><a class="toclink" href="#hot-paths-zero-margin-for-error">Hot Paths: Zero Margin for Error</a></h2>
<p>I define hot paths as system components where downtime significantly affects our SLA - critical numbers, authentication, or features that directly impact business and users.</p>
<p>These systems require extra care:
- World-class unit tests and coverage
- Attention to unhappy paths
- More conservative change management</p>
<p>Take Instagram: it's more important for signed-in users to see their feed than for signup to work perfectly.</p>
<h2 id="logging-and-error-handling"><a class="toclink" href="#logging-and-error-handling">Logging and Error Handling</a></h2>
<p>Beyond traditional logging, we utilize logs in unit tests to ensure they're not removed carelessly during updates. This makes log changes visible during code review.</p>
<p>We also return custom error codes with responses - they help identify issues without log diving and assist both customers and developers debugging problems.</p>
<p>For critical errors sent to monitoring tools like Sentry, we use custom exception names to quickly spot issue locations based on error messages.</p>
<h2 id="graceful-failure-the-hardest-problem"><a class="toclink" href="#graceful-failure-the-hardest-problem">Graceful Failure: The Hardest Problem</a></h2>
<p>This ties back to state management. Building resilient state machines requires balancing when to fail, retry frequency, state resets, and maintaining manageable state complexity.</p>
<p>It's one of the trickiest aspects of system design - fighting between reliability and simplicity.</p>
<h2 id="the-pattern-recognition"><a class="toclink" href="#the-pattern-recognition">The Pattern Recognition</a></h2>
<p>After years of building systems, these principles become pattern recognition. The key is being intentional about applying them rather than hoping they happen by accident.</p>
<p>Sean's post does an excellent job distilling complex system design into actionable principles. The challenge is remembering to apply them when you're deep in implementation details.</p>
<hr>
<p>What patterns have you noticed in your own system design work? I'd love to hear about principles that have served you well over time.</p>
        </div>

        <div class="article-meta">
            <div class="tags-section">
              <h5>Tags:</h5>
              <div class="tags-container">
                  <a href="https://ashwch.com/tag/system-design.html" class="tag">system-design</a>
                  <a href="https://ashwch.com/tag/software-architecture.html" class="tag">software-architecture</a>
                  <a href="https://ashwch.com/tag/database-design.html" class="tag">database-design</a>
                  <a href="https://ashwch.com/tag/state-management.html" class="tag">state-management</a>
                  <a href="https://ashwch.com/tag/performance.html" class="tag">performance</a>
                  <a href="https://ashwch.com/tag/best-practices.html" class="tag">best-practices</a>
              </div>
            </div>
          
          <div class="back-button-container">
            <a href="https://ashwch.com" class="back-to-posts">
              <i class="fas fa-arrow-left"></i> Back to Posts
            </a>
          </div>
        </div>
      </article>

<section class="comments mt-5">
  <div class="card">
    <div class="card-header">
      <h3 class="mb-0">Comments</h3>
    </div>
    <div class="card-body">
      <div id="disqus_thread" aria-live="polite">
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
      <script type="text/javascript">
        var disqus_shortname = 'ashwch';
        var disqus_identifier = '/insights-from-everything-i-know-about-good-system-design.html';
        var disqus_url = 'https://ashwch.com/insights-from-everything-i-know-about-good-system-design.html';
        var disqus_title = 'Insights from "Everything I Know About Good System Design"';
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
  </div>
</section>
    </div>
  </div>
</div>

<style type="text/css">
/* Jupyter notebook styling */
.jp-Cell {
  max-width: 100%;
  margin-bottom: 1.5rem;
}

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: column;
}

.jp-InputPrompt, 
.jp-OutputPrompt {
  font-family: monospace;
  font-size: 0.9rem;
  color: #888;
  width: 4.5rem;
  padding-right: 0.5rem;
  text-align: right;
  flex-shrink: 0;
}

.jp-CodeCell .jp-Cell-inputArea {
  display: flex;
  background-color: #f6f8fa;
  border-radius: 6px;
  margin-bottom: 0.5rem;
}

.jp-CodeCell .jp-Cell-outputArea {
  display: flex;
  margin-top: 0.5rem;
}

.jp-CodeMirror {
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
  font-size: 0.9rem;
  line-height: 1.5;
  padding: 0.5rem;
  width: 100%;
}

.jp-OutputArea-output {
  padding: 0.5rem;
  width: 100%;
  overflow-x: auto;
}

.jp-RenderedMarkdown {
  margin: 0;
}

/* Pandas DataFrames */
table.dataframe {
  border-collapse: collapse;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-size: 0.9rem;
  line-height: 1.4;
  margin: 1rem 0;
  width: 100%;
}

.dataframe thead th {
  background-color: #f0f0f0;
  border: 1px solid #ddd;
  padding: 0.5rem;
  text-align: left;
}

.dataframe tbody td {
  border: 1px solid #ddd;
  padding: 0.5rem;
  text-align: left;
}

.dataframe tbody tr:nth-child(even) {
  background-color: #f9f9f9;
}

/* Matplotlib figures */
.jp-RenderedImage img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1rem auto;
}

/* Hide cell execution counts */
.prompt {
  display: none;
}

/* Cell borders */
div.cell {
  border: none;
  margin-bottom: 1.5rem;
}

div.text_cell_render {
  padding: 0;
}

/* Code highlighting */
pre code {
  background-color: inherit;
  padding: 0;
}

/* Jupyter code blocks */
div.input_area {
  background-color: #f6f8fa;
  border-radius: 6px;
  padding: 0.5rem;
  margin: 0.5rem 0;
}

/* Mobile optimization */
@media (max-width: 768px) {
  .jp-InputPrompt, 
  .jp-OutputPrompt {
    width: 3rem;
    font-size: 0.8rem;
  }
  
  .jp-CodeMirror,
  .jp-OutputArea-output {
    font-size: 0.8rem;
  }
  
  table.dataframe {
    font-size: 0.8rem;
  }
  
  .dataframe thead th,
  .dataframe tbody td {
    padding: 0.3rem;
  }
}</style>
        </main>

        <footer class="site-footer mt-5 py-4 bg-light">
            <div class="container text-center">
                <p class="mb-0">
                    © 2025 Ashwini Chaudhary(Monty), license <a href="https://github.com/ashwch/ashwch.github.io/blob/master/LICENSE">MIT</a>
                    unless otherwise noted.
                </p>
                <p class="mb-0 small text-muted">
                    Generated by <a href="http://docs.getpelican.com/">Pelican</a>
                </p>
            </div>
        </footer>

        <!-- Bootstrap JS Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        
        <!-- Theme Switching Script -->
        <script>
            // Theme switching functionality
            (function() {
                const themeToggle = document.getElementById('theme-toggle');
                const lightIcon = document.getElementById('theme-toggle-light');
                const darkIcon = document.getElementById('theme-toggle-dark');
                const htmlElement = document.documentElement;
                
                // Function to set theme
                function setTheme(theme) {
                    if (theme === 'dark') {
                        htmlElement.setAttribute('data-theme', 'dark');
                        localStorage.setItem('theme', 'dark');
                        lightIcon.classList.add('d-none');
                        darkIcon.classList.remove('d-none');
                    } else {
                        htmlElement.setAttribute('data-theme', 'light');
                        localStorage.setItem('theme', 'light');
                        darkIcon.classList.add('d-none');
                        lightIcon.classList.remove('d-none');
                    }
                }
                
                // Check for saved user preference, system preference, or default to light
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                
                if (savedTheme === 'dark') {
                    setTheme('dark');
                } else if (savedTheme === 'light') {
                    setTheme('light');
                } else if (prefersDark) {
                    setTheme('dark');
                } else {
                    setTheme('light');
                }
                
                // Toggle theme on button click
                themeToggle.addEventListener('click', () => {
                    const currentTheme = htmlElement.getAttribute('data-theme');
                    if (currentTheme === 'dark') {
                        setTheme('light');
                    } else {
                        setTheme('dark');
                    }
                });
            })();
        </script>

<!-- Google Analytics (GA4) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8G7DZ59108"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8G7DZ59108');
</script>
    </body>
</html>